name: ðŸ“¢ Discord Notifications

on:
  release:
    types: [published]
  workflow_run:
    workflows: ["ðŸš€ Release Please"]
    types: [completed]

jobs:
  notify:
    name: ðŸ“¢ Send Notifications
    runs-on: ubuntu-latest
    if: github.event.release || (github.event.workflow_run.conclusion == 'success')
    steps:
      - name: ðŸŽ‰ Release Notification
        if: github.event.release
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            ðŸš€ **Neex ${{ github.event.release.tag_name }}** has been released!
            
            ðŸ“¦ **Install:** `npm install -g neex@latest`
            ðŸ”— **Release:** ${{ github.event.release.html_url }}
            ðŸ“‹ **Changelog:** Check the release notes for what's new!
            
            âš¡ Built with Rust for maximum performance ðŸ¦€

      - name: âœ… CI Success Notification  
        if: github.event.workflow_run && github.event.workflow_run.conclusion == 'success'
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            âœ… **CI Pipeline Successful** for Neex
            
            ðŸ”— **Commit:** ${{ github.event.workflow_run.head_commit.message }}
            ðŸ‘¤ **Author:** ${{ github.event.workflow_run.head_commit.author.name }}
            ðŸŒ¿ **Branch:** ${{ github.event.workflow_run.head_branch }}